# Eraser Helm Chart

## Contributing Changes

This Helm chart is autogenerated from the Eraser static manifest. The generator code lives under third_party/open-policy-agent/gatekeeper/helmify. To make modifications to this template, please edit kustomization.yaml, kustomize-for-helm.yaml and replacements.go under that directory and then run make manifests. Your changes will show up in the manifest_staging directory and will be promoted to the root charts directory the next time an Eraser release is cut.

## Get Repo Info

```console
helm repo add eraser https://eraser-dev.github.io/eraser/charts
helm repo update
```

_See [helm repo](https://helm.sh/docs/helm/helm_repo/) for command documentation._

## Install Chart

```console
# Helm install with eraser-system namespace already created
$ helm install -n eraser-system [RELEASE_NAME] eraser/eraser

# Helm install and create namespace
$ helm install -n eraser-system [RELEASE_NAME] eraser/eraser --create-namespace

```

_See [parameters](#parameters) below._

_See [helm install](https://helm.sh/docs/helm/helm_install/) for command documentation._

## Parameters

| Parameter                                       | Description                                                                                          | Default                        |
| ----------------------------------------------- | ---------------------------------------------------------------------------------------------------- | ------------------------------ |
| runtimeConfig.health                            | Settings for the health server.                                                                      | `{}`                           |
| runtimeConfig.metrics                           | Settings for the metrics server.                                                                     | `{}`                           |
| runtimeConfig.webhook                           | Settings for the webhook server.                                                                     | `{}`                           |
| runtimeConfig.leaderElection                    | Settings for leader election.                                                                        | `{}`                           |
| runtimeConfig.manager.runtime                   | The container runtime to use.                                                                        | `containerd`                   |
| runtimeConfig.manager.otlpEndpoint              | The OTLP endpoint to send metrics to.                                                                 | `""`                           |
| runtimeConfig.manager.logLevel                  | The logging level for the manager.                                                                   | `info`                         |
| runtimeConfig.manager.scheduling                | Settings for scheduling.                                                                             | `{}`                           |
| runtimeConfig.manager.profile                   | Settings for the profiler.                                                                           | `{}`                           |
| runtimeConfig.manager.imageJob.successRatio     | The minimum ratio of successful image jobs required for the overall job to be considered successful. | `1.0`                          |
| runtimeConfig.manager.imageJob.cleanup          | Settings for image job cleanup.                                                                      | `{}`                           |
| runtimeConfig.manager.pullSecrets               | Image pull secrets for collector/scanner/eraser.                                                     | `[]`                           |
| runtimeConfig.manager.priorityClassName         | Priority class name for collector/scanner/eraser.                                                    | `""`                           |
| runtimeConfig.manager.additionalPodLabels       | Additional labels for all pods that the controller creates at runtime.                               | `{}`                           |
| runtimeConfig.manager.nodeFilter                | Filter for nodes.                                                                                    | `{}`                           |
| runtimeConfig.components.collector              | Settings for the collector component.                                                                | `{ enabled: false }`           |
| runtimeConfig.components.scanner                | Settings for the scanner component.                                                                  | `{ enabled: false }`           |
| runtimeConfig.components.eraser                 | Settings for the eraser component.                                                                   | `{}`                           |
| deploy.image.repo                               | Repository for the image.                                                                            | `ghcr.io/eraser-dev/eraser-manager` |
| deploy.image.pullPolicy                         | Policy for pulling the image.                                                                        | `IfNotPresent`                 |
| deploy.image.tag                                | Overrides the default image tag.                                                                     | `""`                           |
| deploy.additionalArgs                           | Additional arguments to pass to the command.                                                         | `[]`                           |
| deploy.priorityClassName                        | Priority class name.                                                                                 | `""`                           |
| deploy.additionalPodLabels                      | Additional labels for the controller pod.                                                            | `{}`                           |
| deploy.securityContext.allowPrivilegeEscalation | Whether to allow privilege escalation.                                                               | `false`                        |
| deploy.resources.limits.memory                  | Memory limit for the resources.                                                                      | `30Mi`                         |
| deploy.resources.requests.cpu                   | CPU request for the resources.                                                                       | `100m`                         |
| deploy.resources.requests.memory                | Memory request for the resources.                                                                    | `20Mi`                         |
| deploy.nodeSelector                             | Node Selector for manager.                                                                           | kubernetes.io/os: linux        |
| deploy.tolerations                              | Tolerations for the manager.                                                                         | []                             |
| deploy.affinity                                 | Affinity for the manager.                                                                            | {}                             |
| nameOverride                                    | Override name if needed.                                                                             | ""                             |
